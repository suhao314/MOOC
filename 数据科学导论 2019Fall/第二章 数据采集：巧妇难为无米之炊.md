# 第二章 数据采集：巧妇难为无米之炊

## 2.1 感知万物

数据采集的硬件实现

大数据的来源（从产生数据的主题的角度来讲）

* 机构产生的数据：少量
  * 关系数据库中的数据
* 个人产生的数据：大量
  * 社交媒体和评论
  * 移动通信
* 机器产生的数据：巨量
  * 传感器
  * 监控摄像头

大数据提出的背景

* 搭载感测设备的移动装置，高空遥感等产生的数据呈指数爆炸生长
* 对撞机：15000w个传感器，40TB/S
* 手环：3GB/day

设计传感器节点时需要关心：

* 硬件成本
* 尺寸
* 使用寿命
* 性能

传感器：测学非电学物理量并将其转换为电信号的器件，在物理环境和处理器之间提供接口，可以布置在被测对象的内部或附近

微机电麦克风：（微机电技术MEMS）在硅片上刻蚀感应膜（核心技术），同时可能在硅片上整合前置放大，模数转换器的麦克风

IMU，惯性测量单元，测量速度，方向，引力，将加速度计，陀螺仪和磁力计集成在一个封装中，~$5

* 加速度计：测量各个方向上的受力得到结果
* 陀螺仪：基于角动量守恒，检测角度和角动量
* 磁力计：测量场强和方向

接近传感器，运动传感器，红外探测传感器

热敏电阻：聚合物或陶瓷，负温度系数，和分压网络，运算放大器协同工作

热电偶：？

温度传感芯片：硅器件的特征量随温度变化，例如三极管结电压和温度成正比

有噪声，需要校准

## 2.2 化繁为简

信号处理模块：对传感器采集到的数据进行压缩编码等预处理

大部分传感器仅输出模拟信号，甚至非常微弱的信号

放大器

* 对非常微弱的信号进行放大
* 减小失真
  * 高增益，宽带宽，低噪声
* 放大后滤波
  * 模拟信号包含高频噪声：低通滤波滤去高频
  * 模拟滤波器或数字滤波器
    * 模拟滤波器：电阻，电容，晶体管组成的物理网络
      * 高效，低功耗
    * 数字滤波器：对模拟信号进行采样，数字运算单元实现滤波特性
      * 灵活
* 放大后的信号经模拟数字转换器转换为数字信号



处理器和微处理器（用于传感器节点）

* 微控制器MCU

  * MSP430系列（超低功耗,16位宽,片上ADC,DAC,时钟,RAM,ROM,FLASH,I2C接口）
  * ARM架构M系列，32位宽
  * 通用的MCU
    * 可编程扩展功能
    * 上层通信协议，信号处理算法尚在研究
    
    


数字处理器DSP

* 多媒体应用
* 对数据进行复杂预处理
* TMS320




FPGA/ASIC

* 实现数字硬件电路
  * FPGA
    * 单颗芯片具有一定规模的逻辑门阵列，可多次烧写，容易升级修改
    * 实现大规模电路，任意复杂功能的微处理器
    * 价格昂贵，与规模成正比
    * 用于验证，或者功能常常变化的应用
  * ASIC
    * 专用集成电路，设计好即无法修改，可以集成更多的芯片，更稳定
    * 单颗设计成本高，批量生产便宜
    * 传感器节点数量庞大，算法复杂且固定或者要求鲁棒性（价格不敏感）的场景
  
    
  
* 图形处理器GPU

  * 专门进行图形处理的微处理器
  
  * CPU内核数量少，通用计算
  * GPU内核数量大，可大规模并行计算

## 2.3 前程无线

采集和预处理后的数据绝大部分通过传感器内部的无线收发机来进行无线传输

* 蜂窝技术

  * 手机通信技术
  * 距离最远，功耗最大
  * 需要授权和付费

* wifi

  * 传输范围广，速率快
  * 802.11n
  * 2.4G 5G：传输速率不同
  * 2.4G：微波炉，蓝牙干扰，速度慢

* 蓝牙

  * 传统上一个蓝牙网络最多可以包含7个活动设备

  * 无线短程系统

  * 理论上100m，实际上几米范围内

  * 2Mbps

  * 低功耗，但纽扣电池不足以

  * BLE低功耗蓝牙：1M/s，不支持数据流，只发射小的数据快
    
    * 响应时间比普通蓝牙短
    
    * 减少发射的峰值电流
    * 使用简单的调制系统
    * 适用于温度监测

* ZigBee

  * 响应时间短

  * 低功耗，低复杂度，廉价，低速率
* 802.15.4
  * 支持树形，星形，网形（mesh）拓扑
* 支持大量设备连接（数万）
  
* NFC

  * 短距离，低成本
  * 可以无需供电
  * 一次只和一台设备连接：安全性

* 低功耗，远距离（~km）

  * LoRa
    * 星状拓扑，窄带通信技术
    * 非授权ISM，品质三者中最低
    * 高功耗堆在汇聚点
    * 使用无需授权的频谱
  * NB-IoT
    * 用于物联网，窄带通信技术
    * 基于手机蜂窝网（授权LTE，品质高）
  * Sigfox
    * 基于蜂窝硬件架构（非授权ISM，品质中等）
    * 超窄带宽

功耗排序：

ZigBee，BLE < 蓝牙 < wifi

主要功耗来源：无线通信模块

​    